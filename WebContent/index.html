<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie9"><![endif]-->
<head>

<title>Vertex Dashboard</title>

<!-- CSS -->
<link href="/vertex/resources/css/bootstrap.min.css" rel="stylesheet">
<link href="/vertex/resources/css/animate.min.css" rel="stylesheet">
<link href="/vertex/resources/css/font-awesome.min.css" rel="stylesheet">
<link href="/vertex/resources/css/form.css" rel="stylesheet">
<link href="/vertex/resources/css/calendar.css" rel="stylesheet">
<link href="/vertex/resources/css/style.css" rel="stylesheet">
<link href="/vertex/resources/css/icons.css" rel="stylesheet">
<link href="/vertex/resources/css/generics.css" rel="stylesheet">
</head>
<body id="skin-blur-ocean">

	<header id="header" class="media">
		<a href="" id="menu-toggle"></a> <a class="logo pull-left"
			href="/vertex/index.html">Vertex Dashboard</a>

		<div class="media-body">
			<div class="media" id="top-menu">
				<div class="pull-left tm-icon">
					<a data-drawer="messages" class="drawer-toggle" href=""> <i
						class="sa-top-message"></i> <i class="n-count animated">5</i> <span>Messages</span>
					</a>
				</div>
				<div class="pull-left tm-icon">
					<a data-drawer="notifications" class="drawer-toggle" href=""> <i
						class="sa-top-updates"></i> <i class="n-count animated">9</i> <span>Updates</span>
					</a>
				</div>



				<div id="time" class="pull-right">
					<span id="hours"></span> : <span id="min"></span> : <span id="sec"></span>
				</div>

				<div class="media-body">
					<input type="text" class="main-search">
				</div>
			</div>
		</div>
	</header>

	<div class="clearfix"></div>

	<section id="main" class="p-relative" role="main">

		<!-- Sidebar -->
		<aside id="sidebar">

			<!-- Sidbar Widgets -->
			<div class="side-widgets overflow">
				<!-- Profile Menu -->
				<div class="text-center s-widget m-b-25 dropdown" id="profile-menu">
					<a href="" data-toggle="dropdown"> <img
						class="profile-pic animated"
						src="/vertex/resources/img/profile-pics/male-user-icon.jpg" alt="">
					</a>
					<ul class="dropdown-menu profile-menu">
						<li><a href="">My Profile</a> <i class="icon left">&#61903;</i><i
							class="icon right">&#61815;</i></li>
						<li><a href="">Messages</a> <i class="icon left">&#61903;</i><i
							class="icon right">&#61815;</i></li>
						<li><a href="">Settings</a> <i class="icon left">&#61903;</i><i
							class="icon right">&#61815;</i></li>
						<li><a href="">Sign Out</a> <i class="icon left">&#61903;</i><i
							class="icon right">&#61815;</i></li>
					</ul>
					<h4 id="userFullName" class="m-0"></h4>
				</div>

				<!-- Calendar -->
				<div class="s-widget m-b-25">
					<div id="sidebar-calendar"></div>
				</div>

				<!-- Feeds -->
				<div class="s-widget m-b-25">
					<h2 class="tile-title">Recent Activities</h2>

					<div class="s-widget-body">
						<div id="eventssection" class="media p-l-5"></div>
						<div class="media p-l-5">
							<div id="noeventsmessage" hidden=true class="text-center">
								<a class="t-overflow" href="">You are not subscribed for any
									events yet.</a>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Side Menu -->
			<ul class="list-unstyled side-menu">
				<li class="active"><a class="sa-side-home" href="index.html">
						<span class="menu-item">Dashboard</span>
				</a></li>
				<li><a class="sa-side-typography" href="typography.html"> <span
						class="menu-item">Typography</span>
				</a></li>
				<li><a class="sa-side-widget" href="content-widgets.html">
						<span class="menu-item">Widgets</span>
				</a></li>
				<li><a class="sa-side-table" href="tables.html"> <span
						class="menu-item">Tables</span>
				</a></li>
				<li class="dropdown"><a class="sa-side-form" href=""> <span
						class="menu-item">Form</span>
				</a>
					<ul class="list-unstyled menu-item">
						<li><a href="form-elements.html">Basic Form Elements</a></li>
						<li><a href="form-components.html">Form Components</a></li>
						<li><a href="form-examples.html">Form Examples</a></li>
						<li><a href="form-validation.html">Form Validation</a></li>
					</ul></li>
				<li class="dropdown"><a class="sa-side-ui" href=""> <span
						class="menu-item">User Interface</span>
				</a>
					<ul class="list-unstyled menu-item">
						<li><a href="buttons.html">Buttons</a></li>
						<li><a href="labels.html">Labels</a></li>
						<li><a href="images-icons.html">Images &amp; Icons</a></li>
						<li><a href="alerts.html">Alerts</a></li>
						<li><a href="media.html">Media</a></li>
						<li><a href="components.html">Components</a></li>
						<li><a href="other-components.html">Others</a></li>
					</ul></li>
				<li class="dropdown"><a class="sa-side-photos" href=""> <span
						class="menu-item">PHOTO GALLERY</span>
				</a>
					<ul class="list-unstyled menu-item">
						<li><a href="photo-gallery.html">Google Images like</a></li>
						<li><a href="photo-gallery-alt.html">Photo Gallery - 2</a></li>
					</ul></li>
				<li><a class="sa-side-chart" href="charts.html"> <span
						class="menu-item">Charts</span>
				</a></li>
				<li><a class="sa-side-folder" href="file-manager.html"> <span
						class="menu-item">File Manager</span>
				</a></li>
				<li><a class="sa-side-calendar" href="calendar.html"> <span
						class="menu-item">Calendar</span>
				</a></li>
				<li class="dropdown"><a class="sa-side-page" href=""> <span
						class="menu-item">Pages</span>
				</a>
					<ul class="list-unstyled menu-item">
						<li><a href="list-view.html">List View</a></li>
						<li><a href="profile-page.html">Profile Page</a></li>
						<li><a href="messages.html">Messages</a></li>
						<li><a href="login.html">Login</a></li>
						<li><a href="404.html">404 Error</a></li>
					</ul></li>
			</ul>

		</aside>

		<!-- Content -->
		<section id="content" class="container">

			<!-- Messages Drawer -->
			<div id="messages" class="tile drawer animated">
				<div class="listview narrow">
					<div class="media">
						<a href="">Send a New Message</a> <span class="drawer-close">&times;</span>

					</div>
					<div class="overflow" style="height: 254px">
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/1.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Nadin Jackson - 2 Hours ago</small><br>
								<a class="t-overflow" href="">Mauris consectetur urna nec
									tempor adipiscing. Proin sit amet nisi ligula. Sed eu
									adipiscing lectus</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/2.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">David Villa - 5 Hours ago</small><br>
								<a class="t-overflow" href="">Suspendisse in purus ut nibh
									placerat Cras pulvinar euismod nunc quis gravida. Suspendisse
									pharetra</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/3.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Harris worgon - On 15/12/2013</small><br>
								<a class="t-overflow" href="">Maecenas venenatis enim
									condimentum ultrices fringilla. Nulla eget libero rhoncus,
									bibendum diam eleifend, vulputate mi. Fusce non nibh pulvinar,
									ornare turpis id</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/4.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Mitch Bradberry - On
									14/12/2013</small><br> <a class="t-overflow" href="">Phasellus
									interdum felis enim, eu bibendum ipsum tristique vitae.
									Phasellus feugiat massa orci, sed viverra felis aliquet quis.
									Curabitur vel blandit odio. Vestibulum sagittis quis sem sit
									amet tristique.</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/1.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Nadin Jackson - On 15/12/2013</small><br>
								<a class="t-overflow" href="">Ipsum wintoo consectetur urna
									nec tempor adipiscing. Proin sit amet nisi ligula. Sed eu
									adipiscing lectus</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/2.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">David Villa - On 16/12/2013</small><br>
								<a class="t-overflow" href="">Suspendisse in purus ut nibh
									placerat Cras pulvinar euismod nunc quis gravida. Suspendisse
									pharetra</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/3.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Harris worgon - On 17/12/2013</small><br>
								<a class="t-overflow" href="">Maecenas venenatis enim
									condimentum ultrices fringilla. Nulla eget libero rhoncus,
									bibendum diam eleifend, vulputate mi. Fusce non nibh pulvinar,
									ornare turpis id</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/4.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Mitch Bradberry - On
									18/12/2013</small><br> <a class="t-overflow" href="">Phasellus
									interdum felis enim, eu bibendum ipsum tristique vitae.
									Phasellus feugiat massa orci, sed viverra felis aliquet quis.
									Curabitur vel blandit odio. Vestibulum sagittis quis sem sit
									amet tristique.</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/5.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Wendy Mitchell - On 19/12/2013</small><br>
								<a class="t-overflow" href="">Integer a eros dapibus,
									vehicula quam accumsan, tincidunt purus</a>
							</div>
						</div>
					</div>
					<div class="media text-center whiter l-100">
						<a href=""><small>VIEW ALL</small></a>
					</div>
				</div>
			</div>

			<!-- Notification Drawer -->
			<div id="notifications" class="tile drawer animated">
				<div class="listview narrow">
					<div class="media">
						<a href="">Notification Settings</a> <span class="drawer-close">&times;</span>
					</div>
					<div class="overflow" style="height: 254px">
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/1.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Nadin Jackson - 2 Hours ago</small><br>
								<a class="t-overflow" href="">Mauris consectetur urna nec
									tempor adipiscing. Proin sit amet nisi ligula. Sed eu
									adipiscing lectus</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/2.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">David Villa - 5 Hours ago</small><br>
								<a class="t-overflow" href="">Suspendisse in purus ut nibh
									placerat Cras pulvinar euismod nunc quis gravida. Suspendisse
									pharetra</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/3.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Harris worgon - On 15/12/2013</small><br>
								<a class="t-overflow" href="">Maecenas venenatis enim
									condimentum ultrices fringilla. Nulla eget libero rhoncus,
									bibendum diam eleifend, vulputate mi. Fusce non nibh pulvinar,
									ornare turpis id</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/4.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Mitch Bradberry - On
									14/12/2013</small><br> <a class="t-overflow" href="">Phasellus
									interdum felis enim, eu bibendum ipsum tristique vitae.
									Phasellus feugiat massa orci, sed viverra felis aliquet quis.
									Curabitur vel blandit odio. Vestibulum sagittis quis sem sit
									amet tristique.</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/1.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">Nadin Jackson - On 15/12/2013</small><br>
								<a class="t-overflow" href="">Ipsum wintoo consectetur urna
									nec tempor adipiscing. Proin sit amet nisi ligula. Sed eu
									adipiscing lectus</a>
							</div>
						</div>
						<div class="media">
							<div class="pull-left">
								<img width="40" src="img/profile-pics/2.jpg" alt="">
							</div>
							<div class="media-body">
								<small class="text-muted">David Villa - On 16/12/2013</small><br>
								<a class="t-overflow" href="">Suspendisse in purus ut nibh
									placerat Cras pulvinar euismod nunc quis gravida. Suspendisse
									pharetra</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			
			<section id="main" class="p-relative" role="main">
			<div class="block-area">

					<!-- Projects -->
					<div class="tile">
						<h2 class="tile-title">Projects</h2>
						<div class="tile-config dropdown">
							<a data-toggle="dropdown" href="" class="tile-menu"></a>
							<ul class="dropdown-menu pull-right text-right">
								<li><a href="/vertex/start-project.html">Start New Project</a></li>
								<li><a href="">Refresh</a></li>
							</ul>
						</div>

						<div class="listview narrow">
						<div id="projectlist" class="media"></div>
						</div>
					</div>
					<div id="projectdetails" class="tile">
					</div>
				</div>
				<div class="clearfix"></div>
			</section>
		</section>
	</section>

	<!-- Javascript Libraries -->
	<!-- jQuery -->
	<script src="/vertex/resources/js/jquery.min.js"></script>
	<!-- jQuery Library -->
	<script src="/vertex/resources/js/jquery-ui.min.js"></script>
	<!-- jQuery UI -->
	<script src="/vertex/resources/js/jquery.easing.1.3.js"></script>
	<!-- jQuery Easing - Requirred for Lightbox + Pie Charts-->

	<!-- Bootstrap -->
	<script src="/vertex/resources/js/bootstrap.min.js"></script>

	<!-- Charts -->
	<script src="/vertex/resources/js/charts/jquery.flot.js"></script>
	<!-- Flot Main -->
	<script src="/vertex/resources/js/charts/jquery.flot.time.js"></script>
	<!-- Flot sub -->
	<script src="/vertex/resources/js/charts/jquery.flot.animator.min.js"></script>
	<!-- Flot sub -->
	<script src="/vertex/resources/js/charts/jquery.flot.resize.min.js"></script>
	<!-- Flot sub - for repaint when resizing the screen -->

	<script src="/vertex/resources/js/sparkline.min.js"></script>
	<!-- Sparkline - Tiny charts -->
	<script src="/vertex/resources/js/easypiechart.js"></script>
	<!-- EasyPieChart - Animated Pie Charts -->
	<script src="/vertex/resources/js/charts.js"></script>
	<!-- All the above chart related functions -->

	<!-- Map -->
	<script src="/vertex/resources/js/maps/jvectormap.min.js"></script>
	<!-- jVectorMap main library -->
	<script src="/vertex/resources/js/maps/usa.js"></script>
	<!-- USA Map for jVectorMap -->

	<!--  Form Related -->
	<script src="/vertex/resources/js/icheck.js"></script>
	<!-- Custom Checkbox + Radio -->

	<!-- UX -->
	<script src="/vertex/resources/js/scroll.min.js"></script>
	<!-- Custom Scrollbar -->

	<!-- Other -->
	<script src="/vertex/resources/js/calendar.min.js"></script>
	<!-- Calendar -->
	<script src="/vertex/resources/js/feeds.min.js"></script>
	<!-- News Feeds -->


	<!-- All JS functions -->
	<script src="/vertex/resources/js/functions.js"></script>
	<script src="/vertex/resources/js/template.js"></script>
	
	<script>
	
	$(document).ready(function() {
		user = getUser();
		getEvents();
		
		$.ajax({
			url: "/vertex/api/project/",
			type : "GET",
			success : function (jqXHR){
				projects = jqXHR;
				$.each(jqXHR, listProject)
			},
			error : function (jqXHR){
				if (jqXHR.status == 404) {
					var noProjectsHtml = 'You have no projects yet. <a class="underline" href="/vertex/start-project.html">Start a new project.</a>';
					$("#projectlist").append(noProjectsHtml);
				}
			}
		});
		
	});
	
	function listProject(index, project) {
		var projectHtml = '<div class="pull-right"><div class="counts">';
		projectHtml += project.tasks.length + '</div></div>';
		projectHtml += '<div class="media-body"><h6><a class="show-project-details" onclick=showProject(this.id) ';
		projectHtml += " id='" + project.projectId + "'>" + project.projectName + '</a></h6></div>';
		
		$("#projectlist").append(projectHtml);
	}
	
	function showProject(projectId) {
		var selectedProject = projects.filter(function(project) {
			return project.projectId == projectId;
		})[0];
		
		var detailsHtml = '<h2 class="tile-title">' + selectedProject.projectName;
		detailsHtml += '</h2>';
		detailsHtml += '<div class="listview icon-list"><div class="media">';
		detailsHtml += '<i class="icon pull-left">&#61854;</i>';
		detailsHtml += '<div class="media-body">' + selectedProject.projectDescription + '</div></div> </div>'
		detailsHtml += '<h4 class="page-title b-0">Ongoing Tasks</h4>';
		detailsHtml += '<div class="listview list-container">';
		if (selectedProject.tasks.length == 0) {
			detailsHtml+= '<div class="media"><div class="media-body">There are no ongoing tasks.</div></div>';
		} else {
			$.each(selectedProject.tasks, function(index, task) {
				if (task.status != 'RESOLVED') {
					detailsHtml+= '<div class="media-body"><div class="media-body">' + task.definition + '</div></div>';
					
				}
			});
		}
		detailsHtml += '<h4 class="page-title b-0">Members</h4><div class="listview list-container">';
		$.each(selectedProject.members, function(index, member) {
			detailsHtml+= '</div><div class="media"><i class="icon pull-left">&#61844;</i><div class="media-body">' + member.fullName + '</div></div>';
		});
		
		detailsHtml += '<h4 class="page-title b-0">Administrators</h4><div class="listview list-container">';
		$.each(selectedProject.administrators, function(index, admin) {
			detailsHtml+= '</div><div class="media"><i class="icon pull-left">&#61822;</i><div class="media-body">' + admin.fullName + '</div></div>';
		});
		detailsHtml += '</div>';
		
		if (isUserGod()) {
			detailsHtml += '<button class="btn btn-sm pull-right">Add Task</button>';
		}
		$('#projectdetails').html(detailsHtml);
	}
	
	</script>
</body>
</html>
